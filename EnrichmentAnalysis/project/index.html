<!DOCTYPE html>
<html lang="en-US">
	<head>
		<title>Gene Enrichment Analysis</title>

		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
		<link rel="stylesheet" href="./include/awesomplete/awesomplete.css" />
		<link rel="stylesheet" href="./include/DataTables-1.10.12/media/css/jquery.dataTables.min.css">
		<link rel="stylesheet" href="./css/style.css">
		<link rel="stylesheet" href="./include/dist/vis.css"  type="text/css" />
		<script src='./js/bundle.js'></script>
		<script src='./js/funcs.js'></script>	
		<script src="./include/sigmajs/sigma.min.js"></script>
		<script src="./include/sigmajs/plugins/sigma.layout.forceAtlas2.min.js"></script>
		<script src="./include/awesomplete/awesomplete.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>		
		<script LANGUAGE="JavaScript" src="./include/DataTables-1.10.12/media/js/jquery.dataTables.min.js" type="text/javascript"></script>
		<script LANGUAGE="JavaScript" src="./include/DataTables-1.10.12/media/js/dataTables.bootstrap.min.js" type="text/javascript"></script>
		<script type="text/javascript" src="./include/dist/vis.js"></script>
		<script LANGUAGE="JavaScript" src="js/main.js" type="text/javascript"></script>
	</head>
	
	<body role="document" onload = "initialize()">

	
		<div class="container" role="main">
			<!--header of the page -->
			<div class="page-header" id="header">
				<h1>Gene Enrichment Analysis Tool</h1>
			</div>

			<!--content of the page -->
			<form role="form">
				<!--setting div-->
				<h2 title="Statistic Options">Setting</h2>
				<div id="statistic_methods_input" class="form-group">
					<label for="method">
						Static Methodï¼š
					</label>
					<select class="form-control" id="method">
						<option value="fisher">fisher's exact</option>
						<option value="hypergeometric">hypergeometric</option>
						<option value="chi-squared" selected>chi-squared</option>
						<option value="fisher2">fisher's exact (more stable, experimental)</option>
					</select>
					<p class="help-block">
						When the input list is compared with the previously computed background, or is a subset of reference list, choose hypergeometric or fisher, for latter only when your query number is quite small. When the input list has few or no intersections with the reference list, the Chi-square tests are more appropriate.
					</p>
				</div>

				<div id="species_input" class="form-group">
					<label for="species">
						Species:
					</label>
					<select class="form-control" id="species">
					</select>
				</div>

				<div id="significance_input" class="form-group">
					<label for="significance">
						Significance Level:
					</label>
					<select class="form-control" id="significance">
						<option value="0.05">0.05</option>
						<option value="0.01">0.01</option>
					</select>
				</div>
				
				<div id="queryType_input" class="form-group">
					<label for="queryType">
						Query type:
					</label>
					<select class="form-control" id="queryType" onchange="queryTypeChange()">
						<option value="background">Gene Ontology Database</option>
						<option value="userinput">user's input reference</option>
					</select>
				</div>
				
				<div id="ontologyCategory_input" class="form-group">
					<label for="ontologyCategory">
						GO category
					</label>
					<select class="form-control" id="ontologyCategory" onchange="ontologyCategoryChange()">
						<option value="all">All</option>
						<option value="cellular_component" selected="selected">Cellular Component</option>
						<option value="molecular_function">Molecular Function</option>
						<option value="biological_process">Biological Process</option>
					</select>
				</div>


				<!--interesting genes div -->
				<h2>Interesting Genes</h2>
				<div id="interesting_input" class="form-group">
					<textarea class="form-control" id="textarea_geneList" rows="5" placeholder="please input the interesting genes"></textarea>
					<button type="button" class="btn btn-default btn-sm helpBtn" data-toggle="collapse" data-target="#help">Help</button>
					<p id = "help" class="collapse">
						Please input the accession ID of gene products. e.g.:<br/>
						TAIR:locus:1005716561<br/>
						TAIR:locus:2031476<br/>
						TAIR:locus:2043067<br/>
						TAIR:locus:2044851<br/>
						TAIR:locus:2012612
					</p>
				</div>

				<!--reference background div -->
				<div hidden = "true" id="referenceBackground">
					<h2>Reference Background</h2>
					<div  id="reference_input" class="form-group">
						<textarea class="form-control" id="textarea_backgroundList"
							rows="5" placeholder="please input the reference background"></textarea>
						<p class="help-block">please input the background reference data</p>
					</div>
				</div>

				<!--buttons -->
				<button type="button" id="submit" class="btn btn-primary" onclick="my_submit()">Submit</button>
				<button type="button" id="reset" class="btn btn-default" onclick="my_reset()">Reset</button>
				<button type="button" id="btn_vis" class="btn btn-primary" onclick="visualize()">Visualize</button>
			</form>
			<br/>
			<!--content3 -->
			<div id="loading" hidden="true" class="alert alert-warning">
				<span class="glyphicon glyphicon-refresh spinning"></span> Processing...
			</div>

			<div hidden="true" id="results">
				<div class="page-header">
					<h2>Analysis Result</h2>
				</div>
				
				<div class="panel panel-default">
					<div id="resultSummary" class="panel-body">
						<p id="result_summary"></p>
						<a hidden = "true" role="button" class="btn btn-default" download="result.txt" id="downloadBtn"><span class="glyphicon glyphicon-download-alt" aria-hidden="true"></span></a>
					</div>
		
					<table id="resultTable" class="display" cellspacing="0" width="100%">
						<thead>
							<tr>
								<th>GO ID</th>
								<th>Name</th>
								<th>Description</th>
								<th>Input#</th>
								<th>Ref#</th>
								<th class="pvalue">P-val</th>
								<th>type</th>
							</tr>
						</thead>
						<tbody id="result_table">
						</tbody>
					</table>
				</div>

			</div>
			
			
			<!--footer of the page -->
			<footer>
				<br/>
				<address>
					&copy;Planteome Project
				</address>
			</footer>
		</div>
		
	</body>
</html>
