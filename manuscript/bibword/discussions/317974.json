[
  {
    "Id": "769498",
    "ThreadId": "317974",
    "Html": "\r\n<p>Hello Yves,</p>\r\n<p>firstly I have to say, nice work you have done here. Very appreciate. I'am working on style for czech citation standard ISO 690:2011 and without your template, I would be lost.</p>\r\n<p>I have one idea, but since I'am not good in coding and programing stuff, I dont know, if it could be implemented or not.</p>\r\n<p>Well, maybe I'am wrong, but as far as I know, there are basicly 9 or 13 numbers in ISBN and 8 numbers in ISSN. Can I somehow analyze form of an element StandardNumber and then, if it has 8 numbers, write ISSN before it and If it has more numbers, write ISBN?\r\n I know, this would be tricky one, but if it will work, it would be very smart solution. What do you thing?</p>\r\n<p>&nbsp;</p>\r\n<p>Vaclav</p>\r\n",
    "PostedDate": "2012-02-16T05:00:49.637-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "774018",
    "ThreadId": "317974",
    "Html": "<p>There is nothing provided for that but you could easily implement it yourself.</p>\r\n<p>In the code look for the following line:</p>\r\n<div style=\"color: black; background-color: white;\">\r\n<pre><span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">$name = 'Pages' and string($source/b:Pages)</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\r\n</pre>\r\n</div>\r\n<p>It is part of a routine which handles all cases. There is none yet for StandardNumber, but you could easily add one. For example, <strong>above</strong> the previous line you could add something like (untested code, just to give you the idea):</p>\r\n<div style=\"color: black; background-color: white;\">\r\n<pre><span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">$name = 'StandardNumber' and string($source/b:StandardNumber)</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\r\n  <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">string-length($source/b:StandardNumber) &amp;gt; 8</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\r\n    <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>ISBN: <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>\r\n  <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span><span style=\"color: blue;\">&gt;</span>\r\n  <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">string-length($source/b:StandardNumber) = 8</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\r\n    <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>ISSN: <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>\r\n  <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span><span style=\"color: blue;\">&gt;</span>\r\n  <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">value-of</span> <span style=\"color: red;\">select</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">$source/b:StandardNumber</span><span style=\"color: black;\">\"</span> <span style=\"color: blue;\">/&gt;</span>\r\n<span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span><span style=\"color: blue;\">&gt;</span>\r\n</pre>\r\n</div>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2012-02-17T02:09:50.24-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "780540",
    "ThreadId": "317974",
    "Html": "<p>Thanks to your little magic advice, I have found working solution. This works good for me and can handle various types of common used serial numbers. It is based on specific rules for standard numbers, which I have found on wikipedia.</p>\r\n<p>&nbsp;</p>\r\n<div style=\"color: black; background-color: white;\">\r\n<pre><span style=\"color: green;\">&lt;!-- Handle standard numbers. --&gt;</span>\r\n<span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">$name = 'StandardNumber' and string($source/b:StandardNumber)</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\r\n<span style=\"color: blue;\"><span style=\"white-space: pre;\">\t</span>&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">number(substring($source/b:StandardNumber, 1,1)) = substring($source/b:StandardNumber, 1,1)</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\r\n <span style=\"white-space: pre;\">\t\t</span><span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">string-length(translate($source/b:StandardNumber, '-','')) = 8</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\r\n<span style=\"color: blue;\"><span style=\"white-space: pre;\">\t\t\t</span>&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>ISSN <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>\r\n <span style=\"white-space: pre;\">\t\t</span><span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span><span style=\"color: blue;\">&gt;</span>\r\n<span style=\"color: blue;\"><span style=\"white-space: pre;\">\t\t</span>&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">string-length(translate($source/b:StandardNumber, '-','')) = 10</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\r\n <span style=\"white-space: pre;\">\t\t\t</span><span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>ISBN <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>\r\n<span style=\"color: blue;\"><span style=\"white-space: pre;\">\t\t</span>&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span><span style=\"color: blue;\">&gt;</span>\r\n <span style=\"white-space: pre;\">\t\t</span><span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">string-length(translate($source/b:StandardNumber, '-','')) = 13</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\r\n  <span style=\"white-space: pre;\">\t\t\t</span><span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>ISBN <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>\r\n <span style=\"white-space: pre;\">\t\t</span><span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span><span style=\"color: blue;\">&gt;</span>\r\n <span style=\"white-space: pre;\">\t\t</span><span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">string-length(translate($source/b:StandardNumber, '-','')) = 26</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\r\n  <span style=\"white-space: pre;\">\t\t\t</span><span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>ISAN <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>\r\n <span style=\"white-space: pre;\">\t\t</span><span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span><span style=\"color: blue;\">&gt;</span>\r\n <span style=\"white-space: pre;\">\t</span><span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span><span style=\"color: blue;\">&gt;</span>\r\n<span style=\"color: blue;\"><span style=\"white-space: pre;\">\t</span>&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">not(number(substring($source/b:StandardNumber, 1,1)) = substring($source/b:StandardNumber, 1,1))</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\r\n<span style=\"color: blue;\"><span style=\"white-space: pre;\">\t\t</span>&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">string-length(translate($source/b:StandardNumber, '-','')) = 12</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\r\n<span style=\"color: blue;\"><span style=\"white-space: pre;\">\t\t\t</span>&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>ISRC <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>\r\n<span style=\"color: blue;\"><span style=\"white-space: pre;\">\t\t</span>&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span><span style=\"color: blue;\">&gt;</span>\r\n<span style=\"color: blue;\"><span style=\"white-space: pre;\">\t\t</span>&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">string-length(translate($source/b:StandardNumber, '-','')) = 13</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\r\n<span style=\"color: blue;\"><span style=\"white-space: pre;\">\t\t\t</span>&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>ISMN <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>\r\n<span style=\"color: blue;\"><span style=\"white-space: pre;\">\t\t</span>&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span><span style=\"color: blue;\">&gt;</span>\r\n<span style=\"color: blue;\"><span style=\"white-space: pre;\">\t</span>&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span><span style=\"color: blue;\">&gt;</span>\r\n<span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">value-of</span> <span style=\"color: red;\">select</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">$source/b:StandardNumber</span><span style=\"color: black;\">\"</span> <span style=\"color: blue;\">/&gt;</span>\r\n<span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span><span style=\"color: blue;\">&gt;</span>\r\n</pre>\r\n</div>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2012-02-19T10:32:51.807-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "784126",
    "ThreadId": "317974",
    "Html": "<p>I realized, that second part could cause some trouble. First section is for standard numbers, that starts with digit, so if anyone write \"ISBN 978-...\" into b:StandardNumber field, then it won't add anything to that. Second part is for standard numbers,  that starts with letter and then, if someone write \"ISSN 4444-5555\" into b:StandardNumber field, because it starts with letter \"I\" and without dash it has lenght = 13, the output&nbsp;would be \"ISMN ISSN 4444-5555\" and that's wrong.</p>\n<p>The ISMN number cause more trouble, since it was redesigned in 2008. Now it looks pretty much the same and have the same lenght as ISBN. Only way, that I see, to detect which one is which, is through calculation of the check digit (ARGH).</p>\n<p>Well, there's not much of use of ISMN and ISRC for citation these days, so i would recommend temporary remove the second part from the code. So the result is:</p>\n<p>&nbsp;</p>\n<div style=\"color: black; background-color: white;\">\n<pre><span style=\"color: green;\">&lt;!-- Handle standard numbers. --&gt;</span>\n<span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">$name = 'StandardNumber' and string($source/b:StandardNumber)</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\n<span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">number(substring($source/b:StandardNumber, 1,1)) = substring($source/b:StandardNumber, 1,1)</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\n  <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">string-length(translate($source/b:StandardNumber, '-','')) = 8</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\n    <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>ISSN <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>\n  <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span><span style=\"color: blue;\">&gt;</span>\n  <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">string-length(translate($source/b:StandardNumber, '-','')) = 10</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\n    <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>ISBN <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>\n  <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span><span style=\"color: blue;\">&gt;</span>\n  <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">string-length(translate($source/b:StandardNumber, '-','')) = 13</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\n    <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>ISBN <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>\n  <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span><span style=\"color: blue;\">&gt;</span>\n  <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">string-length(translate($source/b:StandardNumber, '-','')) = 26</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\n    <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>ISAN <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>\n  <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span><span style=\"color: blue;\">&gt;</span>\n<span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">if</span><span style=\"color: blue;\">&gt;</span>\n<span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">value-of</span> <span style=\"color: red;\">select</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">$source/b:StandardNumber</span><span style=\"color: black;\">\"</span> <span style=\"color: blue;\">/&gt;</span>\n<span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span><span style=\"color: blue;\">&gt;</span>\n</pre>\n</div>",
    "PostedDate": "2012-02-20T07:31:07.56-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "823793",
    "ThreadId": "317974",
    "Html": "<p>Ok, so I work it out to work with almost all common used standard identifiers. I divided it into two parts:</p>\n<p>one part in the place where the previous was</p>\n<p>&nbsp;</p>\n<div style=\"color: black; background-color: white;\">\n<pre><span style=\"color: green;\">&lt;!-- Handle standard numbers. --&gt;</span>\n  <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">$name = 'StandardNumber' and string($source/b:StandardNumber)</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\n    <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">choose</span><span style=\"color: blue;\">&gt;</span>\n    <span style=\"color: green;\">&lt;!-- If string starts with number, sends it to template. This avoid cases, when user writes ISBN/ISSN... themselves. --&gt;</span>\n      <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">number(substring($source/b:StandardNumber, 1,1)) = substring($source/b:StandardNumber, 1,1)</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\n        <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">call-template</span> <span style=\"color: red;\">name</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">standard-number</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\n          <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">with-param</span> <span style=\"color: red;\">name</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">identifier</span><span style=\"color: black;\">\"</span> <span style=\"color: red;\">select</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">translate($source/b:StandardNumber, '- ','')</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">/&gt;</span>\n        <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">call-template</span><span style=\"color: blue;\">&gt;</span>\n      <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span><span style=\"color: blue;\">&gt;</span>\n      <span style=\"color: green;\">&lt;!-- If string starts with letter, it could also be ISRC or old form of ISNM. Old ISNM always starts with letter M, while ISRC always starts with double letter and dash. --&gt;</span>\n      <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">substring($source/b:StandardNumber, 3, 1) = '-'</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\n        <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>ISRC <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>\n      <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span><span style=\"color: blue;\">&gt;</span>\n      <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">starts-with($source/b:StandardNumber, 'M')</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\n        <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>ISNM <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>\n      <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span><span style=\"color: blue;\">&gt;</span>\n    <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">choose</span><span style=\"color: blue;\">&gt;</span>\n    <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">value-of</span> <span style=\"color: red;\">select</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">$source/b:StandardNumber</span><span style=\"color: black;\">\"</span> <span style=\"color: blue;\">/&gt;</span>\n  <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span><span style=\"color: blue;\">&gt;</span>\n</pre>\n</div>\n<p>&nbsp;</p>\n<p>and second part - the template</p>\n<div style=\"color: black; background-color: white;\">\n<pre><div style=\"color: black; background-color: white;\"><pre>  <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">template</span> <span style=\"color: red;\">name</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">standard-number</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\n  \n  \t<span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">param</span> <span style=\"color: red;\">name</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">identifier</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">/&gt;</span>\n    <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">choose</span><span style=\"color: blue;\">&gt;</span>\n      <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">contains($identifier, '/')</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\n        <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>DOI <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>\n      <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span><span style=\"color: blue;\">&gt;</span>      \n      <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">string-length($identifier) = 8</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\n        <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>ISSN <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>\n      <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span><span style=\"color: blue;\">&gt;</span>\n      <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">string-length($identifier) = 10</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\n        <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>ISBN <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>\n      <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span><span style=\"color: blue;\">&gt;</span>\n      <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">string-length($identifier) = 13</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\n      \t<span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">choose</span><span style=\"color: blue;\">&gt;</span>\n          <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">substring($identifier, 1, 4) = 9790</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\n            <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>ISNM <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>\n          <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span><span style=\"color: blue;\">&gt;</span>\n          <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">otherwise</span><span style=\"color: blue;\">&gt;</span>\n            <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>ISBN <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>\n          <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">otherwise</span><span style=\"color: blue;\">&gt;</span>\n        <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">choose</span><span style=\"color: blue;\">&gt;</span>\n      <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span><span style=\"color: blue;\">&gt;</span>\n      <span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span> <span style=\"color: red;\">test</span><span style=\"color: blue;\">=</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">string-length($identifier) = 26</span><span style=\"color: black;\">\"</span><span style=\"color: blue;\">&gt;</span>\n      \t<span style=\"color: blue;\">&lt;</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>ISAN <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">text</span><span style=\"color: blue;\">&gt;</span>\n      <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">when</span><span style=\"color: blue;\">&gt;</span>\n    <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">choose</span><span style=\"color: blue;\">&gt;</span>\n    \n  <span style=\"color: blue;\">&lt;/</span><span style=\"color: #a31515;\">xsl</span><span style=\"color: blue;\">:</span><span style=\"color: #a31515;\">template</span><span style=\"color: blue;\">&gt;</span>\n</pre>\n</div>\n<br /></pre>\n</div>\n<p>It maybe isn&acute;t very sophisticated code, but it works great, so if anyone want to use it, feel free to do so.</p>\n<p>&nbsp;</p>\n<p>EDIT - improved template code to recognize DOI standard number, which can also begins with number, but i that case contains slash</p>",
    "PostedDate": "2012-04-14T02:23:04.367-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]